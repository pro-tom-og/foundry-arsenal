{"name":"Ring des Wassers","type":"equipment","img":"modules/tm-arsenal/media/ring_blauer_stein.png","system":{"price":{"value":2000},"quantity":{"value":1},"weight":{"value":0.1},"effect":{"value":"","attributes":""},"parent_id":0,"description":{"value":"<p><span style=\"font-family: Signika\">Ein schön gearbeiteter silberner Ring mit blauem Schmuckstein. Ein Delphin und Wellenmuster sind eingraviert. </span></p><p><span style=\"font-family: Signika\">Man sagt er habe magische Kräfte.</span></p>"},"gmdescription":{"value":"<p>Je Anwendung kann der Charakter 1W6 Minuten über Wasser laufen.</p><p>Jede Anwendung senkt die Strukturpunkte des Rings um 1, wenn 1W20 größer als die aktuellen Strukturpunkte des Rings ist.</p>"},"equipmentType":{"value":"clothes"},"structure":{"max":10,"value":10},"capacity":0,"worn":{"value":false,"wearable":true},"obfuscation":{"details":true,"effects":true}},"effects":[],"ownership":{"default":0,"wrpLyNWHX89suYZf":3},"flags":{"scene-packer":{"hash":"b4c3cae2943025f867ab8aa42eabef2773e1ff14","sourceId":"Item.93npJPvizvJi2yUQ"},"dsa5":{"onUseEffect":"main( actor, item )\n\nasync function main ( actor, item )\n{\n\n    const dauer = await new Roll(\"d6\").roll({async:false}).total;// in Minuten\n    const detailInfo = \"Fallschaden wird weiterhin durch Wasser reduziert und auch bewusstes Eintauchen bleibt möglich. Befindet sich der Anwender unter Wasser kann er leicht auf die Oberfläche klettern.\"\n    const msgheader = \"<h2>Segen des Wasserdschinn</h2> \";\n    const msgtext = msgheader + actor.name + \" kann für eine kurze Zeit über Wasser laufen.<br/>\" ;\n    const description = \"Kann für eine kurze Zeit über Wasser laufen, als wäre es fest. \" + detailInfo;\n    let verbrauch = \"<h4>Der Ringstein ist dunkler und kleiner geworden.</h4>\";\n    const endVerbrauch = \"<h4>Der Ringstein ist nun vollständig verschwunden</h4>\";\n    const label = \"Wellenlaufen\";\n    const icon = \"modules/tm-arsenal/media/wellen4.png\";\n    const duration = dauer * 60;\n    const tmData = { \"itemId\": \"wellenlaufen.ring\" };\n    const ringdescriptionverbraucht ='   <p><span style=\"font-family: Signika\">Ein schön gearbeiteter silberner Ring, aber der Schmuckstein scheint zu fehlen. Ein Delphin und Wellenmuster sind eingraviert. </span></p><p><span style=\"font-family: Signika\">Er scheint keine magischen Kräfte zu haben.</span></p>\\n';\n    const ringdescriptionnew ='   <p><span style=\"font-family: Signika\">Ein schön gearbeiteter silberner Ring mit blauem Schmuckstein. Ein Delphin und Wellenmuster sind eingraviert. </span></p><p><span style=\"font-family: Signika\">Man sagt er habe magische Kräfte.</span></p>\\n';\n\n    if ( actor.effects.find( function ( o ) {\n        return o?.flags?.tmData?.itemId == tmData.itemId\n    } ) )\n    {\n        ui.notifications.error( \"Du bist bereits verzaubert.\" );\n        return;\n    }\n\n    if ( item.system.structure.value < 1 )\n    {\n        ui.notifications.error( \"Nichts geschieht. Der Ring hat all seine Kraft verloren.\" );\n        return;\n    }\n\n    const zufall = await new Roll(\"d20\").roll({async:false}).total;\n    let structure = item.system.structure.value;\n\n    if ( zufall > structure )\n    {\n        structure--;\n        let updateData = { \"system.structure.value\": structure };\n        if(structure<1)\n        {\n            verbrauch = endVerbrauch;\n            updateData[\"system.description.value\"] = ringdescriptionverbraucht;\n        }\n        item.update( updateData )\n    }\n     actor.addCondition( {\n        \"label\": label,\n        \"icon\": icon,\n        \"duration\": { \"seconds\": duration },\n        \"flags\": {\n            \"dsa5\": {\n                \"description\": description\n            },\n            \"tmData\": tmData\n        }\n    } );\n\n    ChatMessage.create( {\n        \"content\": msgtext+ \"<br>\" + verbrauch + \"<br>\" + detailInfo,\n        \"speaker\": { \"alias\": item.name }\n    } )\n\n\n}","enchantments":[]},"core":{"sourceId":"Item.93npJPvizvJi2yUQ"}},"_stats":{"systemId":"dsa5","systemVersion":"4.3.0","coreVersion":"10.291","createdTime":1678223755390,"modifiedTime":1678709334815,"lastModifiedBy":"wrpLyNWHX89suYZf"},"folder":null,"sort":0,"_id":"oD75rCr2BDykhXcT"}
{"name":"Gruppenkasse","type":"equipment","img":"systems/dsa5/icons/categories/Equipment.webp","system":{"price":{"value":0},"quantity":{"value":1},"weight":{"value":0},"effect":{"value":"","attributes":""},"parent_id":0,"description":{"value":""},"gmdescription":{"value":""},"equipmentType":{"value":"misc"},"structure":{"max":0,"value":0},"capacity":0,"worn":{"value":false,"wearable":false}},"effects":[],"ownership":{"default":0,"wrpLyNWHX89suYZf":3},"flags":{"scene-packer":{"hash":"6468fc0ccc4f55e2f7b86a9cb9b20179cac74bb6","sourceId":"Item.AoQwvlV2zubDW0XL"},"dsa5":{"onUseEffect":"game.actors.get(\"Q3wNkuPTWLfMs8mN\").sheet.render(true)"},"core":{"sourceId":"Item.AoQwvlV2zubDW0XL"}},"_stats":{"systemId":"dsa5","systemVersion":"4.3.0","coreVersion":"10.291","createdTime":1678133462557,"modifiedTime":1678709350032,"lastModifiedBy":"wrpLyNWHX89suYZf"},"folder":null,"sort":0,"_id":"OI2CYnDeqbBD5T1x"}
